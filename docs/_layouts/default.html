<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/dark-mode.css' | relative_url }}">
    <title>{{ page.title | default: site.title }}</title>
  </head>
  <body>
    <div class="theme-toggle">
      <button id="theme-toggle-btn" onclick="toggleTheme()">üåô</button>
    </div>
    
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">{{ site.title | default: site.github.repository_name }}</h1>
      <h2 class="project-tagline">{{ site.description | default: site.github.project_tagline }}</h2>
      
      <nav class="main-navigation">
        {% for nav_item in site.navigation %}
          <a href="{{ nav_item.url | relative_url }}" class="nav-link">{{ nav_item.title }}</a>
        {% endfor %}
        
        <div class="github-links">
          <a href="{{ site.github.repository_url }}" class="btn">View on GitHub</a>
          <a href="{{ site.github.repository_url }}/archive/main.zip" class="btn">Download .zip</a>
          <a href="{{ site.github.repository_url }}/archive/main.tar.gz" class="btn">Download .tar.gz</a>
        </div>
      </nav>
    </header>

    <main id="content" class="main-content" role="main">
      <!-- Breadcrumb navigation -->
      <nav class="breadcrumb">
        <a href="{{ '/' | relative_url }}">Home</a>
        {% assign crumbs = page.url | remove: '/index.html' | split: '/' %}
        {% for crumb in crumbs offset: 1 %}
          {% unless forloop.last %}
            / <a href="{% assign crumb_limit = forloop.index | plus: 1 %}{% for crumb in crumbs limit: crumb_limit %}{{ crumb | append: '/' }}{% endfor %}">{{ crumb | replace: '-', ' ' | replace: '_', ' ' | capitalize }}</a>
          {% else %}
            / {{ crumb | replace: '-', ' ' | replace: '_', ' ' | capitalize }}
          {% endunless %}
        {% endfor %}
      </nav>

      <!-- Page content -->
      {{ content }}

      <!-- Table of contents for design docs -->
      {% if page.url contains '/design/' or page.url contains '/architecture/' %}
      <aside class="toc">
        <h3>üìö Related Documentation</h3>
        <ul>
          {% for nav_item in site.navigation %}
            {% if nav_item.children %}
              {% for child in nav_item.children %}
                {% unless child.url == page.url %}
                  <li><a href="{{ child.url | relative_url }}">{{ child.title }}</a></li>
                {% endunless %}
              {% endfor %}
            {% endif %}
          {% endfor %}
        </ul>
      </aside>
      {% endif %}

      <footer class="site-footer">
        <span class="site-footer-owner">
          <a href="{{ site.github.repository_url }}">{{ site.github.repository_name }}</a> 
          is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.
        </span>
        <span class="site-footer-credits">
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the 
          <a href="https://github.com/pages-themes/architect">Architect theme</a>.
        </span>
      </footer>
    </main>

    <script>
      // Dark mode toggle functionality
      function toggleTheme() {
        const body = document.body;
        const toggleBtn = document.getElementById('theme-toggle-btn');
        
        if (body.classList.contains('dark-mode')) {
          body.classList.remove('dark-mode');
          localStorage.setItem('theme', 'light');
          toggleBtn.textContent = 'üåô';
        } else {
          body.classList.add('dark-mode');
          localStorage.setItem('theme', 'dark');
          toggleBtn.textContent = '‚òÄÔ∏è';
        }
      }

      // Load saved theme preference
      document.addEventListener('DOMContentLoaded', function() {
        const savedTheme = localStorage.getItem('theme');
        const toggleBtn = document.getElementById('theme-toggle-btn');
        
        if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.body.classList.add('dark-mode');
          toggleBtn.textContent = '‚òÄÔ∏è';
        }
      });

      // Mobile navigation toggle
      function toggleMobileNav() {
        const nav = document.querySelector('.main-navigation');
        nav.classList.toggle('mobile-open');
      }
    </script>
  </body>
</html>
